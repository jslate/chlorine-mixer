<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Water & Chlorine Mixing Station</title>
  <script src="vendor/javascript/highlight.min.js"></script>
  <script src="vendor/javascript/codejar.js"></script>
  <script src="scripts.js"></script>
  <link href="style.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="vendor/css/highlight.min.css">
</head>

<body>
  <h1 id="head">Water & Chlorine Mixing Station</h1>

  <div id="explanation">
    <p>
      Imagine you have a water & chlorine mixing station, and you need to add
      chlorine to water to make it safe for drinking. This page uses this idea
      to present some exercises to help you learn about JavaScript, which is a
      programming language that's extremely popular, especially for web
      applications like this one.
    </p>

    <p>
      Unlike most web applications, you don't need to be on the Internet to use
      this page. Also, we've made it easy to change the code for this
      application, so you can get some experience with JavaScript code.
    </p>

    <p>You'll see some lines in the code like this: <code class="language-javascript"
        class="code">// this is a comment</code></p>

    <p>Lines like this, which start with two slashes, are comments. They are information for you, rather than
      instructions for the computer.</p>

    <p>
      Because it is easy to change, it's also easy to break. You may find
      yourself in a situation where the code won't run anymore. But don't worry,
      if you break something, you can always get back to working code. Just
      reload the page (control-R) or click one of the links to have an exercise
      completed for you. If you make a lot of changes, make sure you save your
      work somewhere else, so you don't loose something great when you reload
      the page (see Exercise 4 about using a code editor).
    </p>
  </div>

  <hr />
  <div class="form-container">
    <form name="calcForm" id="calcForm" onsubmit="return false;">
      <h2>Water & Chlorine Mixing Station</h2>
      <p><em>Adjust the sliders and click "Update".</em></p>
      <p>
        Amount of water<br />
        <input id="amountOfWater" name="amountOfWater" value="100" type="range" style="width: 300px" min="1" max="100"
          required="required" />
      </p>

      <p>
        Amount of chlorine<br />
        <input id="amountOfChlorine" name="amountOfChlorine" value="0" type="range" style="width: 300px" min="0"
          max="100" required="required" />
      </p>

      <div id="calculateContainer">
        <button id="calculate" class="calculate">Update</button>
        <div class="result">
          <p>Round: <span id="round" class="round">0</span></p>
          <em>
            <div id="resultString">
              You can click the button, but not much will happen, yet. Keep reading!
            </div>
          </em>
        </div>
      </div>


    </form>

    <div class="cholera-container">
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 234px; left: 217px; transform: rotate(0.04turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 94px; left: 209px; transform: rotate(0.21turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 42px; left: 163px; transform: rotate(0.2turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 192px; left: 121px; transform: rotate(0.97turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 225px; left: 31px; transform: rotate(0.47turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 153px; left: 55px; transform: rotate(0.01turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 116px; left: 240px; transform: rotate(0.31turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 242px; left: 125px; transform: rotate(0.84turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 100px; left: 119px; transform: rotate(0.61turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 90px; left: 172px; transform: rotate(0.57turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 119px; left: 187px; transform: rotate(0.73turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 108px; left: 219px; transform: rotate(0.32turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 72px; left: 187px; transform: rotate(0.56turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 84px; left: 48px; transform: rotate(0.86turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 48px; left: 77px; transform: rotate(0.26turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 254px; left: 106px; transform: rotate(0.36turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 135px; left: 43px; transform: rotate(0.38turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 19px; left: 214px; transform: rotate(0.35turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 89px; left: 113px; transform: rotate(0.87turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 176px; left: 127px; transform: rotate(0.04turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 170px; left: 180px; transform: rotate(0.29turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 155px; left: 62px; transform: rotate(0.68turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 85px; left: 70px; transform: rotate(0.24turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 36px; left: 160px; transform: rotate(0.46turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 39px; left: 148px; transform: rotate(0.49turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 34px; left: 101px; transform: rotate(0.11turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 75px; left: 122px; transform: rotate(0.2turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 148px; left: 70px; transform: rotate(0.18turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 107px; left: 69px; transform: rotate(0.77turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 78px; left: 249px; transform: rotate(0.28turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 211px; left: 15px; transform: rotate(0.15turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 135px; left: 13px; transform: rotate(0.98turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 228px; left: 30px; transform: rotate(0.31turn);' />
      <img src='images/cholera_2.svg' style='position: absolute; top: 39px; left: 242px; transform: rotate(0.6turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 116px; left: 183px; transform: rotate(0.53turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 150px; left: 163px; transform: rotate(0.48turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 242px; left: 180px; transform: rotate(0.17turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 188px; left: 12px; transform: rotate(0.9turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 23px; left: 106px; transform: rotate(0.78turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 227px; left: 46px; transform: rotate(0.36turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 192px; left: 166px; transform: rotate(0.77turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 128px; left: 19px; transform: rotate(0.42turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 198px; left: 90px; transform: rotate(0.45turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 49px; left: 61px; transform: rotate(0.45turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 229px; left: 67px; transform: rotate(0.82turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 162px; left: 31px; transform: rotate(0.28turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 62px; left: 210px; transform: rotate(0.65turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 258px; left: 261px; transform: rotate(0.24turn);' />
      <img src='images/cholera_2.svg' style='position: absolute; top: 202px; left: 55px; transform: rotate(1.0turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 256px; left: 55px; transform: rotate(0.69turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 133px; left: 255px; transform: rotate(0.08turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 261px; left: 196px; transform: rotate(0.33turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 21px; left: 90px; transform: rotate(0.02turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 78px; left: 97px; transform: rotate(0.22turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 111px; left: 149px; transform: rotate(0.82turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 128px; left: 38px; transform: rotate(0.87turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 255px; left: 243px; transform: rotate(0.2turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 122px; left: 25px; transform: rotate(0.88turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 109px; left: 86px; transform: rotate(0.07turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 185px; left: 161px; transform: rotate(0.36turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 169px; left: 204px; transform: rotate(0.2turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 43px; left: 157px; transform: rotate(0.51turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 116px; left: 191px; transform: rotate(0.59turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 149px; left: 233px; transform: rotate(0.03turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 162px; left: 16px; transform: rotate(0.16turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 246px; left: 168px; transform: rotate(0.97turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 222px; left: 38px; transform: rotate(0.17turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 77px; left: 98px; transform: rotate(0.38turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 31px; left: 169px; transform: rotate(0.15turn);' />
      <img src='images/cholera_2.svg' style='position: absolute; top: 86px; left: 88px; transform: rotate(0.51turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 214px; left: 113px; transform: rotate(0.18turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 56px; left: 166px; transform: rotate(0.61turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 163px; left: 168px; transform: rotate(0.63turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 161px; left: 80px; transform: rotate(0.39turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 37px; left: 66px; transform: rotate(0.91turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 190px; left: 208px; transform: rotate(0.79turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 30px; left: 241px; transform: rotate(0.53turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 259px; left: 193px; transform: rotate(0.6turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 131px; left: 208px; transform: rotate(0.57turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 211px; left: 128px; transform: rotate(0.22turn);' />
      <img src='images/cholera_1.svg' style='position: absolute; top: 56px; left: 198px; transform: rotate(0.6turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 203px; left: 181px; transform: rotate(0.73turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 114px; left: 37px; transform: rotate(0.12turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 125px; left: 47px; transform: rotate(0.35turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 205px; left: 224px; transform: rotate(0.8turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 221px; left: 52px; transform: rotate(0.42turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 145px; left: 40px; transform: rotate(0.77turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 55px; left: 130px; transform: rotate(0.38turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 124px; left: 112px; transform: rotate(0.87turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 36px; left: 260px; transform: rotate(0.95turn);' />
      <img src='images/cholera_2.svg' style='position: absolute; top: 74px; left: 49px; transform: rotate(0.21turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 139px; left: 209px; transform: rotate(0.3turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 48px; left: 132px; transform: rotate(0.21turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 240px; left: 149px; transform: rotate(0.21turn);' />
      <img src='images/cholera_3.svg'
        style='position: absolute; top: 89px; left: 116px; transform: rotate(0.98turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 50px; left: 114px; transform: rotate(0.25turn);' />
      <img src='images/cholera_2.svg' style='position: absolute; top: 16px; left: 47px; transform: rotate(0.88turn);' />
      <img src='images/cholera_3.svg' style='position: absolute; top: 63px; left: 197px; transform: rotate(0.4turn);' />
      <img src='images/cholera_1.svg'
        style='position: absolute; top: 76px; left: 177px; transform: rotate(0.58turn);' />
      <img src='images/cholera_2.svg'
        style='position: absolute; top: 59px; left: 242px; transform: rotate(0.03turn);' />
    </div>
    <div id="face" class="face">
      <img src="images/sick.svg" alt="sick face">
    </div>
  </div>

  <hr />

  <h2>Code</h2>

  <p>This code gets run whenever you click the "Calculate" button. If you make changes,
    be sure to click "Update Code" for your changes to take effect.</p>

  <pre><code id="code" class="language-javascript" class="code">// Update the round number
const roundElement = document.getElementById('round');
roundElement.innerHTML = parseInt(roundElement.innerHTML) + 1;</code></pre>
  <button id="updateCode">Update Code</button>

  <hr />

  <div id="exercises">
    <h2>Exercise #1: Update the face</h2>

    <p>Right now, not much happens. We want to make changes so that we show a different face based on the ratio of
      chlorine to water.</p>

    <ol>
      <li>Add these lines to the code above. <strong>As you add the code, try to understand what each line is doing.
        It's okay if you don't understand all of it.</strong>
        <pre><code class="language-javascript" class="code">// Get values from the form and assign them to constants
const amountOfWater = document.getElementById('amountOfWater').value;
const amountOfChlorine = document.getElementById('amountOfChlorine').value;</code></pre>

        These constants hold onto the value from the two sliders. They each contain a number under 100.
      </li>
      <li>Next add these lines.
        <pre><code class="language-javascript" class="code">// Get the ratio of chlorine to water
const ratio = amountOfChlorine / amountOfWater;</code></pre>
        Now we have the ratio of chlorine to water.

      </li>
      <li>
        We're almost done with this part! Add these lines:
        <pre><code class="language-javascript" class="code">// Get the face element to update
const faceElement = document.querySelector('#face img');

// Choose the correct face type & update the result string
let faceType = 'happy'
if (ratio < 0.1) {
  faceType='sick';
  resultString.innerHTML='There is still cholera in the water!' ;
} else if (ratio> 0.2) {
  faceType = 'yuck';
  resultString.innerHTML = 'There is too much chlorine in the water!';
} else {
  resultString.innerHTML = 'There is just the right amount of chlorine in the water!';
}

// Update the face element
faceElement.src = `images/${faceType}.svg`;
faceElement.alt = `${faceType} face`;</code></pre>
      </li>
      <li>Click "Update Code".</li>
      <li>Try the mixing station again. What happens when you move the sliders around and click "Update"?</li>
    </ol>

    <p>If you have trouble, you can <a href="#" data-exercise-id="exercise-1" class="solve">have the exercise solved for
        you</a>. But then how will you learn?</p>

    <hr />

    <h2>Exercise #2: Make the cholera germs disappear!</h2>

    <ol>
      <li>Add the following lines to the end of the code:

        <pre>
<code class="language-javascript" class="code">// Get the cholera count to display
let choleraCount = Math.floor(ratio * 1000);

// If it's more than 100, show 100
choleraCount = choleraCount >= 100 ? 100 : choleraCount;</code></pre>

        Now we know how many cholera germs we want to show.
      </li>
      <li>Next add these lines.
        <pre><code class="language-javascript" class="code">// Get all the cholera images
const imgs = [...document.querySelector('.cholera-container').querySelectorAll('img')];

// Start by showing all of them
imgs.forEach((e) => e.style.display = 'inline-block');

// Then hide 100 - choleraCount of them
imgs.slice(100 - choleraCount).forEach((e) => e.style.display = 'none');</code>
</pre>
      </li>
      <li>Click "Update Code".</li>
      <li>Try the mixing station again. What happens when you move the sliders around and click "Update"?</li>
    </ol>
    <p>If you have trouble, you can <a href="#" data-exercise-id="exercise-2" class="solve">have the exercise solved for
        you</a>. But then how will you learn?</p>

    <hr />

    <h2>Exercise #3: Experiment!</h2>

    <p>
      Try changing the numbers in the if/else statements. What happens? Try changing the text.
      Feel free to play around, you can always reload the page if you get stuck.
    </p>


    <hr />

    <h2>Exercise #4: Edit the real source code (Advanced)</h2>

    <p>
      Go to the <a href="solution.html">solution page</a>. It uses almost exactly
      the same code as you should have after you have completed the previous
      exercise. Then dig into the files on the USB drive! Use good code editor,
      like Visual Studio Code, which is also available on the USB drive, and
      open the files on the drive. Start by looking at solution.html,
      chlorine.js, and style.css. What do you think the purpose of each file is?
      Try making some changes. Then save and reload the page in your browser. If
      you get into trouble, there are backup versions of each file, you can copy
      the contents of the .bak file into the original file to start over.
    </p>

    <p>
      Here are some questions that might not have single clear answers, but they
      are worth thinking about:
    </p>

    <ol>
      <li>What would it take to make a chlorine calculator that health workers
        could use? What information would you need that you don't have?</li>
      <li>If you made such a tool, how would you get it to the people who need it?</li>
    </ol>

    <hr />

    <h2>Exercise #5: Edit the SVG images (Advanced)</h2>

    <p>
      Do you like to draw? You'll also find .svg files for the images in this
      page, in the images directory. You can edit these file in Inkscape, which
      is also on the USB drive. Start with the faces. Experiment and try
      moving things around. Can you change the colors? Can you give the sick
      face a smile?
    </p>

    <p>
      Inkscape is a powerful image editor, if you put in some time, you can learn to
      do a lot.
    </p>
  </div>

  <div class="exercise-solutions">
    <code id="exercise-1">// Update the round number
const roundElement = document.getElementById('round');
roundElement.innerHTML = parseInt(roundElement.innerHTML) + 1;


// Get values from the form and assign them to constants
const amountOfWater = document.getElementById('amountOfWater').value;
const amountOfChlorine = document.getElementById('amountOfChlorine').value;

// Get the ratio of chlorine to water
const ratio = amountOfChlorine / amountOfWater;

// Get the face element to update
const faceElement = document.querySelector('#face img');

// Choose the correct face type & update the result string
let faceType = 'happy'
if (ratio < 0.1) {
  faceType = 'sick';
  resultString.innerHTML='There is still cholera in the water!' ;
} else if (ratio> 0.2) {
  faceType = 'yuck';
  resultString.innerHTML = 'There is too much chlorine in the water!';
} else {
  resultString.innerHTML = 'There is just the right amount of chlorine in the water!';
}

// Update the face element
faceElement.src = `images/${faceType}.svg`;
faceElement.alt = `${faceType} face`;</code>

    <code id="exercise-2">// Update the round number
const roundElement = document.getElementById('round');
roundElement.innerHTML = parseInt(roundElement.innerHTML) + 1;


// Get values from the form and assign them to constants
const amountOfWater = document.getElementById('amountOfWater').value;
const amountOfChlorine = document.getElementById('amountOfChlorine').value;

// Get the ratio of chlorine to water
const ratio = amountOfChlorine / amountOfWater;

// Get the face element to update
const faceElement = document.querySelector('#face img');

// Choose the correct face type & update the result string
let faceType = 'happy'
if (ratio < 0.1) {
  faceType='sick';
  resultString.innerHTML = 'There is still cholera in the water!' ;
} else if (ratio> 0.2) {
  faceType = 'yuck';
  resultString.innerHTML = 'There is too much chlorine in the water!';
} else {
  resultString.innerHTML = 'There is just the right amount of chlorine in the water!';
}

// Update the face element
faceElement.src = `images/${faceType}.svg`;
faceElement.alt = `${faceType} face`;

// Get the cholera count to display
let choleraCount = Math.floor(ratio * 1000);

// If it's more than 100, show 100
choleraCount = choleraCount >= 100 ? 100 : choleraCount;

// Get all the cholera images
const imgs = [...document.querySelector('.cholera-container').querySelectorAll('img')];

// Start by showing all of them
imgs.forEach((e) => e.style.display = 'inline-block');

// Then hide 100 - choleraCount of them
imgs.slice(100 - choleraCount).forEach((e) => e.style.display = 'none');</code>
  </div>
</body>

</html>
