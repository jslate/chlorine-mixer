<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Cholera Calculator</title>
  <script src="vendor/javascript/highlight.min.js"></script>
  <script src="vendor/javascript/codejar.js"></script>
  <script src="init_dom.js"></script>
  <script src="scripts.js"></script>
  <!-- TO_START_EDITING: remove this line
    <script src="chlorine.js"></script>
  TO_START_EDITING: and also remove this line -->
  <link href="style.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="vendor/css/highlight.min.css">
</head>

<body>
  <h1 id="head">Chlorine Calculator</h1>

  <div id="explanation">
    <p>This is a chlorine calculator that could be used to determine the amount of
      chlorine to add to water to make it safe for drinking. It's also a set of exercises
      to learn about JavaScript, a programming language that's extremely popular, especially
      for web applications like this one. Unlike most web applications, you don't need to be
      on the Internet to use it. Also, we've
      made it easy to change the code for this application, so you can get some experience with
      JavaScript code.
    </p>

    <p>You'll see some lines in the code like this: <code class="language-javascript"
        class="code">// this is a comment</code></p>

    <p>Lines like this, which start with two slashes, are comments. They are information for you, rather than instructions
      for the computer.</p>

    <p>
      Because it is easy to change, it's also easy to break. You may find yourself in a situation
      where the code won't run anymore. But don't worry, if you break something, you can always
      get back to working code. Just reload the page (control-R) or click one of the links to have
      an exercise completed for you. If you make a lot of changes, make sure you save your work somewhere else,
      so you don't loose something great when you reload the page.
    </p>
  </div>

  <hr/>
  <div class="form-container">
    <form name="calcForm" id="calcForm" onsubmit="return false;">
      <h2>The Calculator</h2>
      <p><em>Enter values and click "Calculate".</em></p>
      <p>
        Concentration of bleach product (sodium hypochlorite)<br />
        <input
          id="bleachConcentration"
          name="bleachConcentration"
          placeholder="Bleach concentrate between 1 &amp; 65%"
          hint=""
          type="number"
          style="width: 300px"
          min="1"
          max="65"
          step="0.1"
          required="required"
        /> %
      </p>

      <p>
        Desired concentration of chlorine solution<br/>
        <input
          id="desiredConcentration"
          name="desiredConcentration"
          placeholder="Desired concentrate between 50 &amp; 1000ppm"
          type="number"
          style="width: 300px"
          min="50"
          max="1000"
          step="1"
          required="required"
        /> ppm
      </p>

      <p>
        Desired volume of chlorine solution<br/>
        <input
          id="desiredVolume"
          name="desiredVolume"
          placeholder="Desired volume between 1 &amp; 50 litres"
          type="number"
          style="width: 300px"
          min="1"
          max="50"
          step="0.5"
          required="required"
        /> Liters
      </p>

      <div id="calculateContainer">
        <button id="calculate" class="calculate">Calculate</button>
        <div id="result" class="result" style="display: none;"></div>
      </div>
    </form>

    <div class="cholera-container">
    <img src='images/cholera_2.png' style='position: absolute; top: 234px; left: 217px; transform: rotate(0.04turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 94px; left: 209px; transform: rotate(0.21turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 42px; left: 163px; transform: rotate(0.2turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 192px; left: 121px; transform: rotate(0.97turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 225px; left: 31px; transform: rotate(0.47turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 153px; left: 55px; transform: rotate(0.01turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 116px; left: 240px; transform: rotate(0.31turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 242px; left: 125px; transform: rotate(0.84turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 100px; left: 119px; transform: rotate(0.61turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 90px; left: 172px; transform: rotate(0.57turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 119px; left: 187px; transform: rotate(0.73turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 108px; left: 219px; transform: rotate(0.32turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 72px; left: 187px; transform: rotate(0.56turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 84px; left: 48px; transform: rotate(0.86turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 48px; left: 77px; transform: rotate(0.26turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 254px; left: 106px; transform: rotate(0.36turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 135px; left: 43px; transform: rotate(0.38turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 19px; left: 214px; transform: rotate(0.35turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 89px; left: 113px; transform: rotate(0.87turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 176px; left: 127px; transform: rotate(0.04turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 170px; left: 180px; transform: rotate(0.29turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 155px; left: 62px; transform: rotate(0.68turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 85px; left: 70px; transform: rotate(0.24turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 36px; left: 160px; transform: rotate(0.46turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 39px; left: 148px; transform: rotate(0.49turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 34px; left: 101px; transform: rotate(0.11turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 75px; left: 122px; transform: rotate(0.2turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 148px; left: 70px; transform: rotate(0.18turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 107px; left: 69px; transform: rotate(0.77turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 78px; left: 249px; transform: rotate(0.28turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 211px; left: 15px; transform: rotate(0.15turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 135px; left: 13px; transform: rotate(0.98turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 228px; left: 30px; transform: rotate(0.31turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 39px; left: 242px; transform: rotate(0.6turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 116px; left: 183px; transform: rotate(0.53turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 150px; left: 163px; transform: rotate(0.48turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 242px; left: 180px; transform: rotate(0.17turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 188px; left: 12px; transform: rotate(0.9turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 23px; left: 106px; transform: rotate(0.78turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 227px; left: 46px; transform: rotate(0.36turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 192px; left: 166px; transform: rotate(0.77turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 128px; left: 19px; transform: rotate(0.42turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 198px; left: 90px; transform: rotate(0.45turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 49px; left: 61px; transform: rotate(0.45turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 229px; left: 67px; transform: rotate(0.82turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 162px; left: 31px; transform: rotate(0.28turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 62px; left: 210px; transform: rotate(0.65turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 258px; left: 261px; transform: rotate(0.24turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 202px; left: 55px; transform: rotate(1.0turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 256px; left: 55px; transform: rotate(0.69turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 133px; left: 255px; transform: rotate(0.08turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 261px; left: 196px; transform: rotate(0.33turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 21px; left: 90px; transform: rotate(0.02turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 78px; left: 97px; transform: rotate(0.22turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 111px; left: 149px; transform: rotate(0.82turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 128px; left: 38px; transform: rotate(0.87turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 255px; left: 243px; transform: rotate(0.2turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 122px; left: 25px; transform: rotate(0.88turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 109px; left: 86px; transform: rotate(0.07turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 185px; left: 161px; transform: rotate(0.36turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 169px; left: 204px; transform: rotate(0.2turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 43px; left: 157px; transform: rotate(0.51turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 116px; left: 191px; transform: rotate(0.59turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 149px; left: 233px; transform: rotate(0.03turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 162px; left: 16px; transform: rotate(0.16turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 246px; left: 168px; transform: rotate(0.97turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 222px; left: 38px; transform: rotate(0.17turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 77px; left: 98px; transform: rotate(0.38turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 31px; left: 169px; transform: rotate(0.15turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 86px; left: 88px; transform: rotate(0.51turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 214px; left: 113px; transform: rotate(0.18turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 56px; left: 166px; transform: rotate(0.61turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 163px; left: 168px; transform: rotate(0.63turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 161px; left: 80px; transform: rotate(0.39turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 37px; left: 66px; transform: rotate(0.91turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 190px; left: 208px; transform: rotate(0.79turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 30px; left: 241px; transform: rotate(0.53turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 259px; left: 193px; transform: rotate(0.6turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 131px; left: 208px; transform: rotate(0.57turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 211px; left: 128px; transform: rotate(0.22turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 56px; left: 198px; transform: rotate(0.6turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 203px; left: 181px; transform: rotate(0.73turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 114px; left: 37px; transform: rotate(0.12turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 125px; left: 47px; transform: rotate(0.35turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 205px; left: 224px; transform: rotate(0.8turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 221px; left: 52px; transform: rotate(0.42turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 145px; left: 40px; transform: rotate(0.77turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 55px; left: 130px; transform: rotate(0.38turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 124px; left: 112px; transform: rotate(0.87turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 36px; left: 260px; transform: rotate(0.95turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 74px; left: 49px; transform: rotate(0.21turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 139px; left: 209px; transform: rotate(0.3turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 48px; left: 132px; transform: rotate(0.21turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 240px; left: 149px; transform: rotate(0.21turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 89px; left: 116px; transform: rotate(0.98turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 50px; left: 114px; transform: rotate(0.25turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 16px; left: 47px; transform: rotate(0.88turn);' />
    <img src='images/cholera_3.png' style='position: absolute; top: 63px; left: 197px; transform: rotate(0.4turn);' />
    <img src='images/cholera_1.png' style='position: absolute; top: 76px; left: 177px; transform: rotate(0.58turn);' />
    <img src='images/cholera_2.png' style='position: absolute; top: 59px; left: 242px; transform: rotate(0.03turn);' />


    </div>
  </div>

  <hr />

  <h2>Code</h2>

  <p>This code gets run whenever you click the "Calculate" button. If you make changes,
    be sure to click "Update Code" for your changes to take effect.</p>

  <pre><code id="code" class="language-javascript" class="code">// Get values from the form and assign them to constants
const bleachConcentration = document.getElementById('bleachConcentration').value;
const desiredConcentration = document.getElementById('desiredConcentration').value;
const desiredVolume = document.getElementById('desiredVolume').value;

// Check to see if all the fields are filled out
const valid = ![bleachConcentration, desiredConcentration, desiredVolume].includes('');

// Do some calculations and assign the results to constants
const availableBleach = (bleachConcentration / 1.05) * 10;
const requiredBleach = (desiredConcentration * desiredVolume) / availableBleach;
const requiredWater = ((desiredVolume) - (requiredBleach / 1000)).toFixed(1);

if (valid == true) {
  // add the text to the page
  let strHTML = `To make your chlorine solution add ${requiredBleach.toFixed(1)} milliliters of bleach to ${requiredWater} litres of water.`;
  document.getElementById('result').innerHTML = strHTML;
} else {
  // add the error message to the page
  document.getElementById('result').innerHTML = "Please enter numbers in all the fields";
}</code></pre>
  <button id="updateCode">Update Code</button>

  <hr />

  <div id="exercises">
    <h2>Exercise #1: Show the number of people the water can be used for</h2>

    <ol>
      <li>Look for the line that starts with <code class="language-javascript" class="code">const requiredWater</code>, about halfway down.</li>
      <li>Below that line, add another line that contains this:<br/>
        <code class="language-javascript" class="code">const requiredWaterPerPersonPerDay = 3;</code>
      </li>
      <li>Look for the line that starts with <code class="language-javascript" class="code">let strHTML</code>, about 5 lines from the bottom.</li>
      <li>Below that line, add another line that contains this:<br/>
        <code class="language-javascript" class="code">strHTML += ` That's enough for ${requiredWater / requiredWaterPerPersonPerDay} people`;</code>
      </li>
      <li>Click "Update Code" and then try using the calculator again. Does it work? What has changed?</li>
    </ol>

    <p>If you have trouble, you can <a href="#" data-exercise-id="exercise-1" class="solve">have the exercise solved for you</a>. But then how will you learn?</p>

    <hr />

    <h2>Exercise #2: Make the cholera germs disappear!</h2>

    <p>Add the following lines to the end of the code:</p>

<pre>
<code class="language-javascript" class="code">const imgs = [...document.querySelector('.cholera-container').querySelectorAll('img')];
imgs.forEach((e) => e.style.display = 'inline-block');
imgs.slice(100 - desiredConcentration).forEach((e) => e.style.display = 'none');
</code>
</pre>
    <p>If you have trouble, you can <a href="#" data-exercise-id="exercise-2" class="solve">have the exercise solved for
      you</a>. But then how will you learn?</p>

    <hr />

    <h2>Exercise #3: Round the number of people affected (Advanced)</h2>

    <p>If you set all the fields in the calculator and click "Calculate", you'll
      should see that it says, "That's enough for 0.3333333333333333 people."</p>

    <p>We definitely don't need to see that many digits! Can you fix it to show just one decimal place?</p>

    <ol>
      <li>Add another variable below <code class="language-javascript" class="code">requiredWaterPerPersonPerDay</code>, and name it <code class="language-javascript" class="code">numberOfPeople</code>.</li>
      <li>So you should have something like <code class="language-javascript" class="code">const numberOfPeople =</code></li>
      <li>After the equals sign, add the calculation from exercise 1 step 4.</li>
      <li>Change the line that was using the calculation to use the new variable:<br />
        <code class="language-javascript" class="code">strHTML += ` That's enough for ${numberOfPeople} people`;</code></li>
      <li>Click "Update Code" and try the calculator again. It should be the same as before.</li>
      <li>Now look at the code on the line that starts with <code class="language-javascript" class="code">const requiredWater</code>. That line is rounding that value, we want to do the same.
        Wrap the calculation in parenthesis, and add <code class="language-javascript" class="code">.toFixed(1)</code> to the end (before the semicolon).</li>
    </ol>

    <p>If you have trouble, you can <a href="#" data-exercise-id="exercise-3" class="solve">have the exercise solved for
          you</a>. But then how will you learn?</p>

    <hr />

    <h2>Exercise #4: Edit the real source code (Super Advanced)</h2>

    <p>
      Dig into the files on the USB drive! Get a good code editor, like <a href="https://code.visualstudio.com">Visual Studio Code</a>
      or <a href="https://notepad-plus-plus.org">Notepad++</a> and open the files on the drive. Search for TO_START_EDITING and follow the
      instructions (in index.html, scripts.js, chlorine.js).
    </p>
  </div>

  <div class="exercise-solutions">
    <code id="exercise-1">
const bleachConcentration = document.getElementById('bleachConcentration').value;
const desiredConcentration = document.getElementById('desiredConcentration').value;
const desiredVolume = document.getElementById('desiredVolume').value;

const valid = ![bleachConcentration, desiredConcentration, desiredVolume].includes('');

const availableBleach = (bleachConcentration / 1.05) * 10;
const requiredBleach = (desiredConcentration * desiredVolume) / availableBleach;
const requiredWater = ((desiredVolume) - (requiredBleach / 1000)).toFixed(1);
const requiredWaterPerPersonPerDay = 3;

if (valid == true) {
  let strHTML = `To make your chlorine solution add ${requiredBleach.toFixed(1)} milliliters of bleach to ${requiredWater}
  litres of water.`;
  strHTML += ` That's enough for ${requiredWater / requiredWaterPerPersonPerDay} people`;
document.getElementById('result').innerHTML = strHTML;
} else {
  document.getElementById('result').innerHTML = "Please enter numbers in all the fields";
}
    </code>

    <code id="exercise-2">
const bleachConcentration = document.getElementById('bleachConcentration').value;
const desiredConcentration = document.getElementById('desiredConcentration').value;
const desiredVolume = document.getElementById('desiredVolume').value;

const valid = ![bleachConcentration, desiredConcentration, desiredVolume].includes('');

const availableBleach = (bleachConcentration / 1.05) * 10;
const requiredBleach = (desiredConcentration * desiredVolume) / availableBleach;
const requiredWater = ((desiredVolume) - (requiredBleach / 1000)).toFixed(1);
const requiredWaterPerPersonPerDay = 3;

if (valid == true) {
let strHTML = `To make your chlorine solution add ${requiredBleach.toFixed(1)} milliliters of bleach to ${requiredWater}
litres of water.`;
strHTML += ` That's enough for ${requiredWater / requiredWaterPerPersonPerDay} people`;
document.getElementById('result').innerHTML = strHTML;
} else {
document.getElementById('result').innerHTML = "Please enter numbers in all the fields";
}

const imgs = [...document.querySelector('.cholera-container').querySelectorAll('img')];
imgs.forEach((e) => e.style.display = 'inline-block');
imgs.slice(100 - desiredConcentration).forEach((e) => e.style.display = 'none');
    </code>

    <code id="exercise-3">

const bleachConcentration = document.getElementById('bleachConcentration').value;
const desiredConcentration = document.getElementById('desiredConcentration').value;
const desiredVolume = document.getElementById('desiredVolume').value;

const valid = ![bleachConcentration, desiredConcentration, desiredVolume].includes('');

const availableBleach = (bleachConcentration / 1.05) * 10;
const requiredBleach = (desiredConcentration * desiredVolume) / availableBleach;
const requiredWater = ((desiredVolume) - (requiredBleach / 1000)).toFixed(1);
const requiredWaterPerPersonPerDay = 3;
const numberOfPeople = (requiredWater / requiredWaterPerPersonPerDay).toFixed(1);

if (valid == true) {
  let strHTML = `To make your chlorine solution add ${requiredBleach.toFixed(1)} milliliters of bleach to ${requiredWater}
  litres of water.`;
  strHTML += ` That's enough for ${numberOfPeople} people`;
  document.getElementById('result').innerHTML = strHTML;
} else {
  document.getElementById('result').innerHTML = "Please enter numbers in all the fields";
}

const imgs = [...document.querySelector('.cholera-container').querySelectorAll('img')];
imgs.forEach((e) => e.style.display = 'inline-block');
imgs.slice(100 - desiredConcentration).forEach((e) => e.style.display = 'none');
    </code>

  </div>
</body>

</html>
